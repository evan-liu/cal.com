"use strict";(self.webpackChunk_calcom_web=self.webpackChunk_calcom_web||[]).push([[4276],{"../../packages/app-store/alby/components/EventTypeAppCardInterface.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),next_navigation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),_calcom_app_store_EventTypeAppContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/app-store/EventTypeAppContext.tsx"),_calcom_app_store_components_AppCard__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/app-store/_components/AppCard.tsx"),_calcom_lib_constants__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../packages/lib/constants.ts"),_calcom_lib_hooks_useLocale__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/lib/hooks/useLocale.ts"),_utils_payments_checkForMultiplePaymentApps__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/app-store/_utils/payments/checkForMultiplePaymentApps.ts"),_EventTypeAppSettingsInterface__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/app-store/alby/components/EventTypeAppSettingsInterface.tsx");const EventTypeAppCard=function EventTypeAppCard({app,eventType,eventTypeFormMetadata}){const searchParams=(0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useSearchParams)(),{t}=(0,_calcom_lib_hooks_useLocale__WEBPACK_IMPORTED_MODULE_4__.Y)(),pathname=(0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.usePathname)(),asPath=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>`${pathname}${searchParams?`?${searchParams.toString()}`:""}`),[pathname,searchParams]),{getAppData,setAppData,disabled}=(0,_calcom_app_store_EventTypeAppContext__WEBPACK_IMPORTED_MODULE_5__.j)(),[requirePayment,setRequirePayment]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(getAppData("enabled")),otherPaymentAppEnabled=(0,_utils_payments_checkForMultiplePaymentApps__WEBPACK_IMPORTED_MODULE_6__.A)(eventTypeFormMetadata),shouldDisableSwitch=!requirePayment&&otherPaymentAppEnabled;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_calcom_app_store_components_AppCard__WEBPACK_IMPORTED_MODULE_7__.A,{returnTo:_calcom_lib_constants__WEBPACK_IMPORTED_MODULE_8__.YW+asPath,app,switchChecked:requirePayment,switchOnClick:enabled=>{setRequirePayment(enabled)},description:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:"Add bitcoin lightning payments to your events"}),disableSwitch:shouldDisableSwitch,switchTooltip:shouldDisableSwitch?t("other_payment_app_enabled"):void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_EventTypeAppSettingsInterface__WEBPACK_IMPORTED_MODULE_3__.default,{eventType,slug:app.slug,disabled,getAppData,setAppData})})},__WEBPACK_DEFAULT_EXPORT__=EventTypeAppCard;EventTypeAppCard.__docgenInfo={description:"",methods:[],displayName:"EventTypeAppCard"}},"../../packages/app-store/alby/components/EventTypeAppSettingsInterface.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>components_EventTypeAppSettingsInterface});var jsx_runtime=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js");const currencyOptions=[{label:"BTC",value:"BTC",unit:"sats"}];var useLocale=__webpack_require__("../../packages/lib/hooks/useLocale.ts"),Alert=__webpack_require__("../../packages/ui/components/alert/Alert.tsx"),Select=__webpack_require__("../../packages/ui/components/form/select/Select.tsx"),TextField=__webpack_require__("../../packages/ui/components/form/inputs/TextField.tsx"),SatSymbol=__webpack_require__("../../packages/ui/components/icon/SatSymbol.tsx"),zod=__webpack_require__("../../packages/app-store/alby/zod.ts");const EventTypeAppSettingsInterface=({eventType,getAppData,setAppData})=>{var _eventType_recurringEvent;const{t}=(0,useLocale.Y)(),price=getAppData("price"),currency=getAppData("currency"),[selectedCurrency,setSelectedCurrency]=(0,react.useState)(currencyOptions.find((c=>c.value===currency))||currencyOptions[0]),paymentOption=getAppData("paymentOption"),paymentOptionSelectValue=(null===zod.OP||void 0===zod.OP?void 0:zod.OP.find((option=>paymentOption===option.value)))||{label:zod.OP[0].label,value:zod.OP[0].value},seatsEnabled=!!eventType.seatsPerTimeSlot,[requirePayment]=(0,react.useState)(getAppData("enabled")),recurringEventDefined=void 0!==(null===(_eventType_recurringEvent=eventType.recurringEvent)||void 0===_eventType_recurringEvent?void 0:_eventType_recurringEvent.count);return(0,react.useEffect)((()=>{!currency&&requirePayment&&setAppData("currency",selectedCurrency.value)}),[currency,selectedCurrency,setAppData,requirePayment]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:recurringEventDefined?(0,jsx_runtime.jsx)(Alert.F,{className:"mt-2",severity:"warning",title:t("warning_recurring_event_payment")}):requirePayment&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"mt-2 block items-center sm:flex",children:(0,jsx_runtime.jsx)(TextField.A_,{label:"Price",labelSrOnly:!0,addOnLeading:(0,jsx_runtime.jsx)(SatSymbol.z,{className:"h-4 w-4"}),addOnSuffix:selectedCurrency.unit||selectedCurrency.value,type:"number",required:!0,className:"block w-full rounded-sm border-gray-300 pl-2 pr-12 text-sm",placeholder:"Price",onChange:e=>{setAppData("price",Number(e.target.value)),currency&&setAppData("currency",currency)},value:price&&price>0?price:void 0})}),(0,jsx_runtime.jsxs)("div",{className:"mt-5 w-60",children:[(0,jsx_runtime.jsx)("label",{className:"text-default block text-sm font-medium",htmlFor:"currency",children:t("currency")}),(0,jsx_runtime.jsx)(Select.l6,{variant:"default",options:currencyOptions,value:selectedCurrency,className:"text-black",defaultValue:selectedCurrency,onChange:e=>{e&&(setSelectedCurrency(e),setAppData("currency",e.value))}})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 w-60",children:[(0,jsx_runtime.jsx)("label",{className:"text-default block text-sm font-medium",htmlFor:"currency",children:"Payment option"}),(0,jsx_runtime.jsx)(Select.l6,{defaultValue:paymentOptionSelectValue?{...paymentOptionSelectValue,label:t(paymentOptionSelectValue.label)}:{...zod.OP[0],label:t(zod.OP[0].label)},options:zod.OP.map((option=>({...option,label:t(option.label)||option.label}))),onChange:input=>{input&&setAppData("paymentOption",input.value)},className:"mb-1 h-[38px] w-full",isDisabled:seatsEnabled})]}),seatsEnabled&&"HOLD"===paymentOption&&(0,jsx_runtime.jsx)(Alert.F,{className:"mt-2",severity:"warning",title:t("seats_and_no_show_fee_error")})]})})},components_EventTypeAppSettingsInterface=EventTypeAppSettingsInterface;EventTypeAppSettingsInterface.__docgenInfo={description:"",methods:[],displayName:"EventTypeAppSettingsInterface"}}}]);