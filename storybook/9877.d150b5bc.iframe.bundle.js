"use strict";(self.webpackChunk_calcom_web=self.webpackChunk_calcom_web||[]).push([[9877],{"../../packages/app-store/_utils/useIsAppEnabled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),_calcom_app_store_EventTypeAppContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../packages/app-store/EventTypeAppContext.tsx");const __WEBPACK_DEFAULT_EXPORT__=function useIsAppEnabled(app){const{getAppData,setAppData}=(0,_calcom_app_store_EventTypeAppContext__WEBPACK_IMPORTED_MODULE_1__.j)(),[enabled,setEnabled]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((()=>{const isAppEnabled=getAppData("enabled");if(!app.credentialOwner)return null!=isAppEnabled&&isAppEnabled;const credentialId=getAppData("credentialId"),isAppEnabledForCredential=isAppEnabled&&(app.userCredentialIds.some((id=>id===credentialId))||app.credentialOwner.credentialId===credentialId);return null!=isAppEnabledForCredential&&isAppEnabledForCredential}));return{enabled,updateEnabled:newValue=>{var _app_userCredentialIds,_app_credentialOwner,_app_credentialOwner1;(newValue||setAppData("credentialId",void 0),newValue&&((null===(_app_userCredentialIds=app.userCredentialIds)||void 0===_app_userCredentialIds?void 0:_app_userCredentialIds.length)||(null===(_app_credentialOwner=app.credentialOwner)||void 0===_app_credentialOwner?void 0:_app_credentialOwner.credentialId)))&&setAppData("credentialId",(null===(_app_credentialOwner1=app.credentialOwner)||void 0===_app_credentialOwner1?void 0:_app_credentialOwner1.credentialId)||app.userCredentialIds[0]);setEnabled(newValue)}}}},"../../packages/app-store/hitpay/components/EventTypeAppCardInterface.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),next_navigation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),_calcom_app_store_EventTypeAppContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../packages/app-store/EventTypeAppContext.tsx"),_calcom_app_store_components_AppCard__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../packages/app-store/_components/AppCard.tsx"),_calcom_lib_constants__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../packages/lib/constants.ts"),_calcom_lib_hooks_useLocale__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/lib/hooks/useLocale.ts"),_utils_payments_checkForMultiplePaymentApps__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../packages/app-store/_utils/payments/checkForMultiplePaymentApps.ts"),_utils_useIsAppEnabled__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../packages/app-store/_utils/useIsAppEnabled.ts"),_EventTypeAppSettingsInterface__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/app-store/hitpay/components/EventTypeAppSettingsInterface.tsx");const EventTypeAppCard=function EventTypeAppCard({app,eventType,eventTypeFormMetadata}){var _eventType_team;const{t}=(0,_calcom_lib_hooks_useLocale__WEBPACK_IMPORTED_MODULE_4__.Y)(),pathname=(0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.usePathname)(),{getAppData,setAppData,disabled}=(0,_calcom_app_store_EventTypeAppContext__WEBPACK_IMPORTED_MODULE_5__.j)(),{enabled,updateEnabled}=(0,_utils_useIsAppEnabled__WEBPACK_IMPORTED_MODULE_6__.A)(app),otherPaymentAppEnabled=(0,_utils_payments_checkForMultiplePaymentApps__WEBPACK_IMPORTED_MODULE_7__.A)(eventTypeFormMetadata),[requirePayment]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(getAppData("enabled")),shouldDisableSwitch=!requirePayment&&otherPaymentAppEnabled;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_calcom_app_store_components_AppCard__WEBPACK_IMPORTED_MODULE_8__.A,{returnTo:`${_calcom_lib_constants__WEBPACK_IMPORTED_MODULE_9__.YW}${pathname}?tabName=apps`,app,switchChecked:enabled,switchOnClick:e=>{updateEnabled(e)},teamId:(null===(_eventType_team=eventType.team)||void 0===_eventType_team?void 0:_eventType_team.id)||void 0,disableSwitch:shouldDisableSwitch,switchTooltip:shouldDisableSwitch?t("other_payment_app_enabled"):void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_EventTypeAppSettingsInterface__WEBPACK_IMPORTED_MODULE_3__.default,{eventType,slug:app.slug,disabled,getAppData,setAppData})})},__WEBPACK_DEFAULT_EXPORT__=EventTypeAppCard;EventTypeAppCard.__docgenInfo={description:"",methods:[],displayName:"EventTypeAppCard"}},"../../packages/app-store/hitpay/components/EventTypeAppSettingsInterface.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>components_EventTypeAppSettingsInterface});var jsx_runtime=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),useLocale=__webpack_require__("../../packages/lib/hooks/useLocale.ts"),Select=__webpack_require__("../../packages/ui/components/form/select/Select.tsx"),TextField=__webpack_require__("../../packages/ui/components/form/inputs/TextField.tsx"),Alert=__webpack_require__("../../packages/ui/components/alert/Alert.tsx");const zeroDecimalCurrencies=["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","UGX","VND","VUV","XAF","XOF","XPF"],convertFromSmallestToPresentableCurrencyUnit=(amount,currency)=>zeroDecimalCurrencies.includes(currency.toUpperCase())?amount:amount/100,paymentOptions=[{label:"on_booking_option",value:"ON_BOOKING"}],currencyOptions=[{label:"United States dollar (USD)",value:"usd"},{label:"Singapore dollar (SGD)",value:"sgd"},{label:"Malaysian ringgit (MYR)",value:"myr"},{label:"Indonesian rupiah (IDR)",value:"idr"},{label:"Japanese yen (JPY)",value:"jpy"},{label:"Hong Kong dollar (HKD)",value:"hkd"},{label:"Thai baht (THB)",value:"thb"},{label:"Australian dollar (AUD)",value:"aud"},{label:"New Zealand dollar (NZD)",value:"nzd"},{label:"British pound sterling (GBP)",value:"gbp"},{label:"Philippine peso (PHP)",value:"php"},{label:"Indian rupee (INR)",value:"inr"},{label:"Chinese yuan (CNY)",value:"cny"},{label:"Euro (EUR)",value:"eur"},{label:"Swiss franc (CHF)",value:"chf"},{label:"Danish krone (DKK)",value:"dkk"},{label:"Swedish krona (SEK)",value:"sek"},{label:"Norwegian krone (NOK)",value:"nok"},{label:"Vietnamese đồng (VND)",value:"vnd"},{label:"Canadian dollar (CAD)",value:"cad"},{label:"South Korean won (KRW)",value:"krw"}],EventTypeAppSettingsInterface=({getAppData,setAppData,disabled,eventType})=>{var _eventType_recurringEvent;const price=getAppData("price"),currency=getAppData("currency")||currencyOptions[0].value,[selectedCurrency,setSelectedCurrency]=(0,react.useState)(currencyOptions.find((c=>c.value===currency))||{label:currencyOptions[0].label,value:currencyOptions[0].value}),paymentOption=getAppData("paymentOption"),requirePayment=getAppData("enabled"),{t}=(0,useLocale.Y)(),recurringEventDefined=void 0!==(null===(_eventType_recurringEvent=eventType.recurringEvent)||void 0===_eventType_recurringEvent?void 0:_eventType_recurringEvent.count),seatsEnabled=!!eventType.seatsPerTimeSlot;(0,react.useEffect)((()=>{requirePayment&&(getAppData("currency")||setAppData("currency",currencyOptions[0].value),getAppData("paymentOption")||setAppData("paymentOption",paymentOptions[0].value))}),[requirePayment,getAppData,setAppData]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[recurringEventDefined&&(0,jsx_runtime.jsx)(Alert.F,{className:"mt-2",severity:"warning",title:t("warning_recurring_event_payment")}),!recurringEventDefined&&requirePayment&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"mt-4 block items-center justify-start sm:flex sm:space-x-2",children:(0,jsx_runtime.jsx)(TextField.A_,{"data-testid":"stripe-price-input",label:t("price"),className:"h-[38px]",addOnLeading:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:selectedCurrency.value?((locale,currency)=>(0).toLocaleString(locale,{style:"currency",currency,minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\d/g,"").trim())("en",selectedCurrency.value):""}),addOnSuffix:currency.toUpperCase(),addOnClassname:"h-[38px]",step:"1",min:"1",type:"number",required:!0,placeholder:"Price",disabled,onChange:e=>{setAppData("price",((amount,currency)=>zeroDecimalCurrencies.includes(currency.toUpperCase())?amount:Math.round(100*amount))(Number(e.target.value),currency))},value:price>0?(value=>{const sValue=Math.floor(value).toString();return parseInt(sValue)})(convertFromSmallestToPresentableCurrencyUnit(price,currency)):void 0})}),(0,jsx_runtime.jsxs)("div",{className:"mt-5 w-60",children:[(0,jsx_runtime.jsx)("label",{className:"text-default mb-1 block text-sm font-medium",htmlFor:"currency",children:t("currency")}),(0,jsx_runtime.jsx)(Select.l6,{"data-testid":"stripe-currency-select",variant:"default",options:currencyOptions,value:selectedCurrency,className:"text-black",defaultValue:selectedCurrency,onChange:e=>{e&&(setSelectedCurrency(e),setAppData("currency",e.value))}})]}),seatsEnabled&&"HOLD"===paymentOption&&(0,jsx_runtime.jsx)(Alert.F,{className:"mt-2",severity:"warning",title:t("seats_and_no_show_fee_error")})]})]})},components_EventTypeAppSettingsInterface=EventTypeAppSettingsInterface;EventTypeAppSettingsInterface.__docgenInfo={description:"",methods:[],displayName:"EventTypeAppSettingsInterface"}}}]);