"use strict";(self.webpackChunk_calcom_web=self.webpackChunk_calcom_web||[]).push([[5897],{"../../packages/app-store/EventTypeAppContext.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>useAppContextWithSchema});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js");const EventTypeAppContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({getAppData:()=>({}),setAppData:()=>({})}),useAppContextWithSchema=()=>react__WEBPACK_IMPORTED_MODULE_0__.useContext(EventTypeAppContext)},"../../packages/app-store/_components/AppCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AppCard});var jsx_runtime=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/@formkit/auto-animate/react/index.mjs"),next_link=__webpack_require__("../../node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),EventTypeAppContext=__webpack_require__("../../packages/app-store/EventTypeAppContext.tsx"),useIsPlatform=__webpack_require__("../../packages/platform/atoms/hooks/useIsPlatform.ts"),classNames=__webpack_require__("../../packages/ui/classNames.ts"),Button=__webpack_require__("../../packages/ui/components/button/Button.tsx"),Switch=__webpack_require__("../../packages/ui/components/form/switch/Switch.tsx"),Icon=__webpack_require__("../../packages/ui/components/icon/Icon.tsx"),section=__webpack_require__("../../packages/ui/components/section/section.tsx"),next_auth_react=__webpack_require__("../../node_modules/next-auth/react/index.js"),trpc=__webpack_require__("../../packages/trpc/react/trpc.ts");var useLocale=__webpack_require__("../../packages/lib/hooks/useLocale.ts"),showToast=__webpack_require__("../../packages/ui/components/toast/showToast.tsx"),useAddAppMutation=__webpack_require__("../../packages/app-store/_utils/useAddAppMutation.ts"),components=__webpack_require__("../../packages/app-store/components.tsx");function OmniInstallAppButton({appId,className,returnTo,teamId}){const{t}=(0,useLocale.Y)(),{data:app}=function useApp(appId){const{status}=(0,next_auth_react.useSession)();return trpc.i.viewer.apps.appById.useQuery({appId},{enabled:"authenticated"===status})}(appId),utils=trpc.i.useUtils(),mutation=(0,useAddAppMutation.A)(null,{returnTo,onSuccess:data=>{utils.viewer.apps.appById.invalidate({appId}),utils.viewer.apps.integrations.invalidate({extendsFeature:"EventType",...teamId&&{teamId}}),(null==data?void 0:data.setupPending)||(0,showToast.P0)(t("app_successfully_installed"),"success")},onError:error=>{error instanceof Error&&(0,showToast.P0)(error.message||t("app_could_not_be_installed"),"error")}});return app?(0,jsx_runtime.jsx)(components.p$,{type:app.type,teamsPlanRequired:app.teamsPlanRequired,wrapperClassName:(0,classNames.A)("[@media(max-width:260px)]:w-full",className),render:({useDefaultComponent,...props})=>(useDefaultComponent&&(props={...props,onClick:()=>{mutation.mutate({type:app.type,variant:app.variant,slug:app.slug,...teamId&&{teamId}})}}),(0,jsx_runtime.jsx)(Button.$,{loading:mutation.isPending,color:"secondary",className:"[@media(max-width:260px)]:w-full [@media(max-width:260px)]:justify-center",StartIcon:"plus",...props,children:t("add")}))}):null}function AppCard({app,description,switchOnClick,switchChecked,children,returnTo,teamId,disableSwitch,switchTooltip,hideSettingsIcon=!1,hideAppCardOptions=!1}){const{t}=(0,es.Bd)(),[animationRef]=(0,react.Q)(),{setAppData,LockedIcon,disabled:managedDisabled}=(0,EventTypeAppContext.j)(),isPlatform=(0,useIsPlatform.X)();return(0,jsx_runtime.jsxs)(section.w,{className:(0,classNames.A)(!(null==app?void 0:app.isInstalled)&&"rounded-xl"),children:[(0,jsx_runtime.jsx)(section.w.Header,{rawHeading:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"flex w-full items-center gap-1",children:[(0,jsx_runtime.jsx)(section.w.Title,{children:null==app?void 0:app.name}),!(null==app?void 0:app.isInstalled)&&(0,jsx_runtime.jsx)("span",{className:"bg-emphasis ml-1 rounded px-1 py-0.5 text-xs font-medium leading-3 tracking-[0.01em]",children:(null==app?void 0:app.categories[0].charAt(0).toUpperCase())+(null==app?void 0:app.categories[0].slice(1))})]}),(0,jsx_runtime.jsx)(section.w.Description,{children:null==app?void 0:app.description})]}),iconSlot:(0,jsx_runtime.jsx)(link_default(),{href:`/apps/${app.slug}`,className:"flex h-8 w-8 items-center justify-center",children:(0,jsx_runtime.jsx)("img",{className:(0,classNames.A)((null==app?void 0:app.logo.includes("-dark"))&&"dark:invert","max-h-full max-w-full object-contain"),src:null==app?void 0:app.logo,alt:null==app?void 0:app.name})}),children:(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("div",{children:(null==app?void 0:app.isInstalled)||app.credentialOwner?(0,jsx_runtime.jsx)("div",{className:"ml-auto flex items-center",children:(0,jsx_runtime.jsx)(Switch.d,{size:"sm",disabled:!app.enabled||managedDisabled||disableSwitch,onCheckedChange:enabled=>{switchOnClick&&switchOnClick(enabled),setAppData("enabled",enabled)},checked:switchChecked,LockedIcon,"data-testid":`${app.slug}-app-switch`,tooltip:switchTooltip})}):(0,jsx_runtime.jsx)(OmniInstallAppButton,{className:"ml-auto flex items-center",appId:app.slug,returnTo,teamId})})})}),hideAppCardOptions?null:(null==app?void 0:app.isInstalled)&&switchChecked&&(0,jsx_runtime.jsx)("div",{ref:animationRef,children:void 0===app.isSetupAlready||app.isSetupAlready?(0,jsx_runtime.jsxs)("div",{className:"relative text-sm [&_input]:mb-0 [&_input]:leading-4",children:[!hideSettingsIcon&&!isPlatform&&(0,jsx_runtime.jsx)(link_default(),{href:`/apps/${app.slug}/setup`,className:"absolute right-4 top-4",children:(0,jsx_runtime.jsx)(Icon.A,{name:"settings",className:"text-default h-4 w-4","aria-hidden":"true"})}),children]}):(0,jsx_runtime.jsxs)("div",{className:"flex h-64 w-full flex-col items-center justify-center gap-4 ",children:[(0,jsx_runtime.jsx)("p",{children:t("this_app_is_not_setup_already")}),(0,jsx_runtime.jsx)(link_default(),{href:`/apps/${app.slug}/setup`,children:(0,jsx_runtime.jsx)(Button.$,{StartIcon:"settings",children:t("setup")})})]})})]})}OmniInstallAppButton.__docgenInfo={description:"Use this component to allow installing an app from anywhere on the app.\nUse of this component requires you to remove custom InstallAppButtonComponent so that it can manage the redirection itself",methods:[],displayName:"OmniInstallAppButton",props:{appId:{required:!0,tsType:{name:"string"},description:""},className:{required:!0,tsType:{name:"string"},description:""},returnTo:{required:!1,tsType:{name:"string"},description:""},teamId:{required:!1,tsType:{name:"number"},description:""}}},AppCard.__docgenInfo={description:"",methods:[],displayName:"AppCard",props:{app:{required:!0,tsType:{name:"intersection",raw:'RouterOutputs["viewer"]["apps"]["integrations"]["items"][number] & {\n  credentialOwner?: CredentialOwner;\n}',elements:[{name:'inferRouterOutputs["viewer"]["apps"]["integrations"]["items"][number]',raw:'RouterOutputs["viewer"]["apps"]["integrations"]["items"][number]'},{name:"signature",type:"object",raw:"{\n  credentialOwner?: CredentialOwner;\n}",signature:{properties:[{key:"credentialOwner",value:{name:"CredentialOwner",required:!1}}]}}]},description:""},description:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},switchChecked:{required:!1,tsType:{name:"boolean"},description:""},switchOnClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"e"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},returnTo:{required:!1,tsType:{name:"string"},description:""},teamId:{required:!1,tsType:{name:"number"},description:""},LockedIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},disableSwitch:{required:!1,tsType:{name:"boolean"},description:""},switchTooltip:{required:!1,tsType:{name:"string"},description:""},hideSettingsIcon:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hideAppCardOptions:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"../../packages/ui/components/section/section.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>Section});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),_formkit_auto_animate_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@formkit/auto-animate/react/index.mjs"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@radix-ui/react-slot/dist/index.mjs"),_classNames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../packages/ui/classNames.ts"),_icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/ui/components/icon/Icon.tsx");const Root=({children,ref,className})=>{const[animateRef]=(0,_formkit_auto_animate_react__WEBPACK_IMPORTED_MODULE_1__.Q)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:animateRef,className:(0,_classNames__WEBPACK_IMPORTED_MODULE_2__.A)("bg-muted flex flex-col gap-4 rounded-2xl p-4",className),children})},Title=({children,ref,as})=>{const Component=as?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.DX:"h2";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component,{ref,className:"text-emphasis text-base font-semibold leading-none",children})},Description=({children,ref,as})=>{const Component=as?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.DX:"h3";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component,{ref,className:"text-subtle line-clamp-1 text-sm",children})},Icon=({ref,name,size="md",iconSlot})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_classNames__WEBPACK_IMPORTED_MODULE_2__.A)("bg-default border-subtle border-subtle flex items-center justify-center border","sm"===size&&"rounded-md p-1","md"===size&&"rounded-[10px] p-1.5"),children:iconSlot||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_icon__WEBPACK_IMPORTED_MODULE_4__.A,{name,className:(0,_classNames__WEBPACK_IMPORTED_MODULE_2__.A)("sm"===size&&"h-4 w-4","md"===size&&"h-6 w-6")})}),Section=Object.assign(Root,{Header:({children,ref,icon,title,description,iconSlot,rawHeading})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref,className:"flex items-center justify-between gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[icon&&!iconSlot&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Icon,{name:icon}),iconSlot&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Icon,{iconSlot}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-0.5",children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Title,{children:title}),description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Description,{children:description}),rawHeading&&rawHeading]})]}),children]}),Content:({children,ref})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:"flex flex-col gap-4",children}),Title,Description,SubSection:({children,ref})=>{const[animateRef]=(0,_formkit_auto_animate_react__WEBPACK_IMPORTED_MODULE_1__.Q)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:animateRef,className:"border-muted bg-default flex flex-col gap-4 rounded-xl border p-3",children})},SubSectionHeader:({children,ref,icon,title,classNames,justify="between",labelFor})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref,className:(0,_classNames__WEBPACK_IMPORTED_MODULE_2__.A)("flex items-center gap-2","between"===justify?"justify-between":"justify-start",null==classNames?void 0:classNames.container),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_classNames__WEBPACK_IMPORTED_MODULE_2__.A)("flex items-center gap-2",null==classNames?void 0:classNames.title),children:[icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Icon,{name:icon,size:"sm"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_classNames__WEBPACK_IMPORTED_MODULE_2__.A)("flex",null==classNames?void 0:classNames.title),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"text-default text-sm font-medium leading-none",id:labelFor,children:title})})]}),children]}),SubSectionContent:({children,ref,invert,classNames})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_classNames__WEBPACK_IMPORTED_MODULE_2__.A)("bg-muted flex flex-col rounded-lg px-[6px] py-1",invert&&"bg-default border-subtle border",null==classNames?void 0:classNames.container),children}),SubSectionNested:({children,ref})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:"bg-default border-subtle flex flex-col gap-2 rounded-xl border p-2",children})});Root.__docgenInfo={description:"",methods:[],displayName:"Root",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},ref:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""}}}}}]);