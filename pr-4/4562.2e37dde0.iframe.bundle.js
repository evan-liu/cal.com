"use strict";(self.webpackChunk_calcom_web=self.webpackChunk_calcom_web||[]).push([[4562],{"../../packages/app-store/giphy/components/EventTypeAppSettingsInterface.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>components_EventTypeAppSettingsInterface});var jsx_runtime=__webpack_require__("../../node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("../../node_modules/next/dist/compiled/react/index.js"),useLocale=__webpack_require__("../../packages/lib/hooks/useLocale.ts"),Button=__webpack_require__("../../packages/ui/components/button/Button.tsx"),controlled_dialog=__webpack_require__("../../packages/features/components/controlled-dialog/index.tsx"),classNames=__webpack_require__("../../packages/ui/classNames.ts"),Alert=__webpack_require__("../../packages/ui/components/alert/Alert.tsx"),Dialog=__webpack_require__("../../packages/ui/components/dialog/Dialog.tsx"),TextField=__webpack_require__("../../packages/ui/components/form/inputs/TextField.tsx"),Icon=__webpack_require__("../../packages/ui/components/icon/Icon.tsx");const SearchDialog=props=>{const{t}=(0,useLocale.Y)(),[gifImage,setGifImage]=(0,react.useState)(""),[nextOffset,setNextOffset]=(0,react.useState)(0),[keyword,setKeyword]=(0,react.useState)(""),{isOpenDialog,setIsOpenDialog}=props,[isPending,setIsPending]=(0,react.useState)(!1),[errorMessage,setErrorMessage]=(0,react.useState)(""),[selectedMode,setSelectedMode]=(0,react.useState)("search"),searchGiphy=async(keyword,offset)=>{if(isPending)return;setIsPending(!0),setErrorMessage("");const res=await fetch("/api/integrations/giphy/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword,offset})}),json=await res.json();return res.ok?(setGifImage(json.image||""),setNextOffset(json.nextOffset),json.image||setErrorMessage("No Result found")):setErrorMessage((null==json?void 0:json.message)||"Something went wrong"),setIsPending(!1),null},renderTab=(iconName,text,mode)=>(0,jsx_runtime.jsxs)("div",{className:(0,classNames.A)("flex cursor-pointer items-center border-b-2 p-2 text-sm ",selectedMode===mode?"text-default border-emphasis":"text-subtle border-transparent"),onClick:()=>{setKeyword(""),setGifImage(""),setSelectedMode(mode)},children:[(0,jsx_runtime.jsx)(Icon.A,{name:iconName,className:"h-4 w-4 ltr:mr-2 rtl:ml-2"}),text]});return(0,jsx_runtime.jsx)(controlled_dialog.l,{open:isOpenDialog,onOpenChange:setIsOpenDialog,children:(0,jsx_runtime.jsxs)(Dialog.Cf,{children:[(0,jsx_runtime.jsx)("h3",{className:"leading-16 font-cal text-emphasis text-xl",id:"modal-title",children:t("add_gif_to_confirmation")}),(0,jsx_runtime.jsx)("p",{className:"text-subtle mb-3 text-sm font-light",children:t("find_gif_spice_confirmation")}),(0,jsx_runtime.jsxs)("div",{className:"border-emphasis flex items-center border-b border-solid",children:[renderTab("search",t("search_giphy"),"search"),renderTab("link",t("add_link_from_giphy"),"url")]}),(0,jsx_runtime.jsxs)("form",{className:"flex w-full justify-center space-x-2 space-y-2 rtl:space-x-reverse",onSubmit:async event=>{event.stopPropagation(),event.preventDefault(),"search"===selectedMode?searchGiphy(keyword,0):"url"===selectedMode&&(async url=>{if(isPending)return;setIsPending(!0),setErrorMessage("");const res=await fetch("/api/integrations/giphy/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url})}),json=await res.json();var _json_;res.ok?(setGifImage(json.image||""),json.image||setErrorMessage("No Result found")):setErrorMessage((null==json?void 0:json.message)||(null==json||null===(_json_=json[0])||void 0===_json_?void 0:_json_.message)||"Something went wrong"),setIsPending(!1)})(keyword)},children:[(0,jsx_runtime.jsx)("div",{className:"relative block w-full pt-2",children:(0,jsx_runtime.jsx)(TextField.pd,{type:"text",placeholder:"search"===selectedMode?t("search_giphy"):"https://media.giphy.com/media/some-id/giphy.gif",value:keyword,onChange:event=>{setKeyword(event.target.value)}})}),(0,jsx_runtime.jsx)(Button.$,{type:"submit",tabIndex:-1,color:"secondary",loading:isPending,children:t("search")})]}),gifImage&&(0,jsx_runtime.jsx)("div",{className:"flex flex-col items-center space-x-2 space-y-2 pt-3 rtl:space-x-reverse",children:(0,jsx_runtime.jsx)("div",{className:"bg-subtle flex w-full items-center justify-center",children:isPending?(0,jsx_runtime.jsx)("div",{className:"flex h-[200px] w-full items-center justify-center bg-gray-400 pb-3 pt-3",children:(0,jsx_runtime.jsxs)("svg",{className:(0,classNames.A)("mx-4 h-5 w-5 animate-spin","text-inverted dark:text-emphasis"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,jsx_runtime.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,jsx_runtime.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,jsx_runtime.jsx)("img",{className:"h-[200px] pb-3 pt-3",src:gifImage,alt:`Gif from Giphy for ${keyword}`})})}),errorMessage&&(0,jsx_runtime.jsx)(Alert.F,{severity:"error",title:errorMessage,className:"my-4"}),gifImage&&"search"===selectedMode&&(0,jsx_runtime.jsxs)("div",{className:"mt-4 flex items-center justify-between space-x-2 rtl:space-x-reverse",children:[(0,jsx_runtime.jsx)("div",{className:"text-subtle text-sm font-light",children:"Not the perfect GIF?"}),(0,jsx_runtime.jsx)(Button.$,{size:"sm",color:"secondary",type:"button",loading:isPending,onClick:()=>searchGiphy(keyword,nextOffset),children:"Shuffle"})]}),(0,jsx_runtime.jsxs)(Dialog.Es,{children:[(0,jsx_runtime.jsx)(Dialog.HM,{color:"minimal",tabIndex:-1,onClick:()=>{props.setIsOpenDialog(!1)},children:t("cancel")}),(0,jsx_runtime.jsx)(Button.$,{type:"button",disabled:!gifImage,onClick:()=>(props.setIsOpenDialog(!1),props.onSave(gifImage),setNextOffset(0),setGifImage(""),setKeyword(""),!1),children:t("add_gif")})]})]})})};function SelectGifInput(props){const{t}=(0,useLocale.Y)(),[selectedGif,setSelectedGif]=(0,react.useState)(props.defaultValue),[showDialog,setShowDialog]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-start space-x-2 space-y-2 rtl:space-x-reverse",children:[selectedGif&&(0,jsx_runtime.jsx)("div",{className:"min-h-[200px]",children:(0,jsx_runtime.jsx)("img",{alt:"Selected Gif Image",src:selectedGif})}),(0,jsx_runtime.jsxs)("div",{className:"flex",children:[selectedGif?(0,jsx_runtime.jsx)(Button.$,{color:"minimal",type:"button",StartIcon:"pencil",onClick:()=>setShowDialog(!0),disabled:props.disabled,children:"Change"}):(0,jsx_runtime.jsx)(Button.$,{color:"minimal",type:"button",StartIcon:"plus",onClick:()=>setShowDialog(!0),disabled:props.disabled,children:"Add from Giphy"}),selectedGif&&(0,jsx_runtime.jsx)(Button.$,{color:"destructive",type:"button",StartIcon:"x",onClick:()=>{setSelectedGif(""),props.onChange("")},disabled:props.disabled,children:t("remove")})]}),(0,jsx_runtime.jsx)(SearchDialog,{isOpenDialog:showDialog,setIsOpenDialog:setShowDialog,onSave:url=>{setSelectedGif(url),props.onChange(url)}})]})}SearchDialog.__docgenInfo={description:"",methods:[],displayName:"SearchDialog",props:{isOpenDialog:{required:!0,tsType:{name:"boolean"},description:""},setIsOpenDialog:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""}}},SelectGifInput.__docgenInfo={description:"",methods:[],displayName:"SelectGifInput",props:{defaultValue:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => void",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const EventTypeAppSettingsInterface=({getAppData,setAppData,disabled})=>{const thankYouPage=getAppData("thankYouPage");return(0,jsx_runtime.jsx)(SelectGifInput,{defaultValue:thankYouPage,disabled,onChange:url=>{setAppData("thankYouPage",url)}})},components_EventTypeAppSettingsInterface=EventTypeAppSettingsInterface;EventTypeAppSettingsInterface.__docgenInfo={description:"",methods:[],displayName:"EventTypeAppSettingsInterface"}}}]);